<h2><%= title "Phaenologische Jahreszeit" %></h2>

<h4>Aktuelle phaenologische Jahreszeit am folgenden Standort:</h4>

<script src="http://api.mygeoposition.com/api/geopicker/api.js" type="text/javascript"></script>

<script type="text/javascript">
  navigator.geolocation.getCurrentPosition(function(position) {
    document.querySelector('#latitude').value = position.coords.latitude;
    document.querySelector('#longitude').value = position.coords.longitude;
  });
  function lookupGeoData() {
    myGeoPositionGeoPicker({
      startPositionLat : document.querySelector('#latitude').value,
      startPositionLng : document.querySelector('#longitude').value,
      startAddress     : document.querySelector('#address').value,
      returnFieldMap   : {
                           'latitude'  : '<LAT>',
                           'longitude' : '<LNG>',
                           'address'   : '<ADDRESS>'
                         }
    });
  }
</script>

<%= form_for :season, url: { action: "show" } do |f| %>
  <div class="row form-space">
    <div class="col-xs-12">
      <div class="input-group">
        <span class="input-group-addon" id="basic-addon1">Breitengrad</span>
          <%= f.text_field :latitude, :class => "form-control",
             :id => "latitude", "aria-label" => "Breitengrad" %>
      </div>
    </div>
  </div>
  <div class="row form-space">
    <div class="col-xs-12">
      <div class="input-group">
        <span class="input-group-addon" id="basic-addon1">Längengrad</span>
          <%= f.text_field :longitude, :class => "form-control",
             :id => "longitude", "aria-label" => "Längengrad" %>
      </div>
    </div>
  </div>
  <div class="row form-space">
    <div class="col-xs-12">
      <div class="input-group">
        <span class="input-group-addon" id="basic-addon1">Adresse</span>
          <%= f.text_field :address, :class => "form-control",
             :id => "address", "aria-label" => "Adresse" %>
      </div>
    </div>
  </div>


  <div class="row form-space">
    <div class="col-xs-12">
      Einen anderen Standort wählen:
      <button type="button" onclick="lookupGeoData();" class="btn btn-success">GeoPicker</button>
    </div>
    <div class="col-xs-12">
    </div>
  </div>

  <div class="row form-space">
    <div class="col-xs-12">
      <%= f.submit "Abfragen",
          :class => "btn btn-success" %>
    </div>
  </div>
<% end %>

