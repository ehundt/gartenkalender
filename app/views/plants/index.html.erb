<% content_for :sidebar do %>
  <%= form_tag(plants_path, method: "get") do %>
    <div class="row sidebar-contacts">
      <div class="col-xs-12">
        <h4>Suche</h4>
        <p><strong>in meiner Pflanzenliste</strong><p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <div class="input-group">
          <%= text_field_tag(:search, "", class: "form-control", placeholder: "z.B. Möhre")  %>
          <span class="input-group-btn">
            <%= submit_tag("suchen", class: "btn btn-default") %>
          </span>
        </div><!-- /input-group -->
      </div><!-- /.col-xs-12 -->
    </div><!-- /.row -->
  <% end %>
<% end %>

<% if @friend %>
  <h4><%= @friend.display_name %>'s Pflanzen</h4>
<% else %>
  <h4>Meine Pflanzen</h4>
<% end %>

<% if @search_text %>
  <% if @searched_plants.empty? %>
    <p><h5>Suchergebnis: </h5>Keine "<strong><%= @search_text %></strong>" gefunden.</p>
  <% else %>
    <% @plants = @searched_plants %>
  <% end %>

<% elsif @plants.empty? %>
    <p>Eigene Pflanzen werden hier aufgelistet, sobald Du entweder
       selbst welche erstellt hast oder Dir von Freunden welche kopiert hast.
    </p>
<% end %>

<% unless @plants.empty? %>
  <br />
  <table class="table">
  <% @plants.each do |plant| %>
    <tr>
      <td><% if plant.main_image.file? %><%= link_to image_tag(plant.main_image.url(:thumb), class: "img-rounded img-responsive"), plant %><% end %></td>
      <td><%= link_to plant.name, plant %></td>
      <td><%= plant.creator.first_name %></td>
      <% unless @friend %>
        <td class="active-button">
          <% if plant.active %>
          <%# TODO: class: "img-rounded img-responsive" %>
            <%= image_tag "plant_active.gif", height: '42px', width: '30px' %>
          <% else %>
            <%= image_tag "plant_inactive.gif", height: '42px', width: '30px' %>
          <% end %>
        </td>
        <td>
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <%= link_to 'Ändern', edit_plant_path(plant) %>
        </td>
        <td>
          <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
          <%= link_to 'Entfernen', plant, method: :delete, data: { confirm: 'Sind Sie sicher?' }, class: "delete-link" %>
        </td>
      <% end %>
    </tr>
  <% end %>
  </table>
<% end %>
